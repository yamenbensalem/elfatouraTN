<div class="dashboard-container">
  <!-- Welcome Section -->
  <div class="welcome-section">
    <h1 class="welcome-title">
      Bienvenue, <span class="user-name">{{ userFullName$ | async }}</span> üëã
    </h1>
    <p class="welcome-subtitle">Voici un aper√ßu de votre activit√© commerciale</p>
  </div>

  <!-- Loading State -->
  @if (isLoading) {
    <div class="loading-container">
      <mat-spinner diameter="48"></mat-spinner>
      <p>Chargement des donn√©es...</p>
    </div>
  } @else {
    <!-- Stats Cards -->
    <div class="stats-grid">
      @for (card of statCards; track card.title) {
        <mat-card class="stat-card" appearance="outlined">
          <mat-card-content>
            <div class="stat-card-content">
              <div class="stat-icon" [style.background-color]="card.color + '20'">
                <mat-icon [style.color]="card.color">{{ card.icon }}</mat-icon>
              </div>
              <div class="stat-info">
                <span class="stat-value">{{ card.value }}</span>
                <span class="stat-title">{{ card.title }}</span>
                @if (card.trend) {
                  <div class="stat-trend" [class.positive]="card.trend.isPositive" [class.negative]="!card.trend.isPositive">
                    <mat-icon>
                      {{ card.trend.isPositive ? 'trending_up' : 'trending_down' }}
                    </mat-icon>
                    <span>{{ card.trend.value }}% ce mois</span>
                  </div>
                }
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      }
    </div>

    <!-- Quick Actions -->
    <section class="section">
      <h2 class="section-title">
        <mat-icon>flash_on</mat-icon>
        Actions Rapides
      </h2>
      <div class="quick-actions-grid">
        @for (action of quickActions; track action.label) {
          <button
            mat-raised-button
            class="quick-action-btn"
            [routerLink]="action.route"
            [style.background-color]="action.color"
          >
            <mat-icon>{{ action.icon }}</mat-icon>
            <span>{{ action.label }}</span>
          </button>
        }
      </div>
    </section>

    <!-- Main Content Grid -->
    <div class="content-grid">
      <!-- Recent Activity -->
      <section class="section activity-section">
        <h2 class="section-title">
          <mat-icon>history</mat-icon>
          Activit√© R√©cente
        </h2>
        <mat-card appearance="outlined">
          <mat-card-content>
            @if (recentActivities.length === 0) {
              <div class="empty-state">
                <mat-icon>inbox</mat-icon>
                <p>Aucune activit√© r√©cente</p>
              </div>
            } @else {
              <mat-list>
                @for (activity of recentActivities; track activity.id) {
                  <mat-list-item class="activity-item">
                    <mat-icon matListItemIcon class="activity-icon {{ activity.type }}">
                      {{ activity.icon }}
                    </mat-icon>
                    <div matListItemTitle>{{ activity.description }}</div>
                    <div matListItemMeta class="activity-time">
                      {{ getTimeAgo(activity.date) }}
                    </div>
                  </mat-list-item>
                  @if (!$last) {
                    <mat-divider></mat-divider>
                  }
                }
              </mat-list>
            }
          </mat-card-content>
        </mat-card>
      </section>

      <!-- Charts Placeholder -->
      <section class="section charts-section">
        <h2 class="section-title">
          <mat-icon>bar_chart</mat-icon>
          Statistiques
        </h2>
        <mat-card appearance="outlined" class="chart-card">
          <mat-card-content>
            <div class="chart-placeholder">
              <mat-icon>insert_chart</mat-icon>
              <p>Graphiques en cours de d√©veloppement</p>
              <span class="hint">Les graphiques de ventes et d'achats seront affich√©s ici</span>
            </div>
          </mat-card-content>
        </mat-card>
      </section>
    </div>
  }
</div>
